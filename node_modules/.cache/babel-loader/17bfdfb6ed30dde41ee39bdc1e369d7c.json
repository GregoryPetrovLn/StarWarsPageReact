{"ast":null,"code":"var _jsxFileName = \"/Users/gregorypetrov/Documents/WebStorm/31-starwars-react-router/src/components/Home.js\";\nimport React from \"react\";\nimport Hero from \"./Hero\";\nimport DreamTeam from \"./DreamTeam\";\nimport style from \"../css_modules/main.module.css\";\nimport { base_url, items, version } from \"../utils/Constants\";\n\nclass Home extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      opening_crawl: ''\n    };\n  }\n\n  componentDidMount() {\n    let text = sessionStorage.getItem('opening_crawl');\n\n    if (text) {\n      this.setState({\n        opening_crawl: text\n      });\n    } else {\n      let episode = Math.floor(Math.random() * 6) + 1;\n      fetch(`${base_url + version}/films/${episode}`).then(response => response.json()).then(data => {\n        this.setState({\n          opening_crawl: data.opening_crawl\n        });\n        sessionStorage.setItem('opening_crawl', data.opening_crawl);\n      });\n    }\n\n    let heroId = this.props.match.params.id;\n\n    if (!Object.keys(items).includes(heroId)) {\n      heroId = 'luke';\n    }\n\n    this.props.changeHero(heroId);\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    if (this.props.match.params.id !== prevProps.match.params.id) {\n      this.props.changeHero(this.props.match.params.id);\n      this.props.changeHero(this.props.match.params.id);\n    }\n  }\n\n  componentWillUnmount() {\n    console.log('Home will unmount');\n  }\n\n  render() {\n    let heroId = this.props.match.params.id;\n\n    if (!Object.keys(items).includes(heroId)) {\n      heroId = 'luke';\n    }\n\n    return React.createElement(\"main\", {\n      className: \"clearfix mt-1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }, React.createElement(Hero, {\n      hero: heroId,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }), React.createElement(DreamTeam, {\n      hero: heroId,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      className: style.farGalaxy,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, this.state.opening_crawl));\n  }\n\n}\n\nexport default Home;","map":{"version":3,"sources":["/Users/gregorypetrov/Documents/WebStorm/31-starwars-react-router/src/components/Home.js"],"names":["React","Hero","DreamTeam","style","base_url","items","version","Home","Component","constructor","props","state","opening_crawl","componentDidMount","text","sessionStorage","getItem","setState","episode","Math","floor","random","fetch","then","response","json","data","setItem","heroId","match","params","id","Object","keys","includes","changeHero","componentDidUpdate","prevProps","prevState","snapshot","componentWillUnmount","console","log","render","farGalaxy"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Hero from \"./Hero\";\nimport DreamTeam from \"./DreamTeam\";\nimport style from \"../css_modules/main.module.css\";\nimport {base_url, items, version} from \"../utils/Constants\";\n\nclass Home extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            opening_crawl: ''\n        };\n    }\n\n    componentDidMount() {\n        let text = sessionStorage.getItem('opening_crawl');\n        if (text) {\n            this.setState({opening_crawl: text});\n        } else {\n            let episode = Math.floor(Math.random() * 6) + 1;\n            fetch(`${base_url+version}/films/${episode}`)\n                .then(response => response.json())\n                .then(data => {\n                    this.setState({\n                        opening_crawl: data.opening_crawl\n                    });\n                    sessionStorage.setItem('opening_crawl', data.opening_crawl);\n                })\n        }\n        let heroId = this.props.match.params.id;\n        if (!Object.keys(items).includes(heroId)) {\n            heroId = 'luke'\n        }\n        this.props.changeHero(heroId);\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        if (this.props.match.params.id !== prevProps.match.params.id)  {\n            this.props.changeHero(this.props.match.params.id);\n\n            this.props.changeHero(this.props.match.params.id);\n        }\n    }\n\n    componentWillUnmount() {\n        console.log('Home will unmount');\n    }\n\n    render() {\n        let heroId = this.props.match.params.id;\n        if (!Object.keys(items).includes(heroId)) {\n            heroId = 'luke'\n        }\n        return (\n            <main className=\"clearfix mt-1\">\n                <Hero hero={heroId}/>\n                <DreamTeam hero={heroId}/>\n                <p className={style.farGalaxy}>{this.state.opening_crawl}</p>\n            </main>\n        );\n    }\n}\n\nexport default Home;"]},"metadata":{},"sourceType":"module"}