{"ast":null,"code":"var _jsxFileName = \"/Users/gregorypetrov/Documents/WebStorm/31-starwars-react-router/src/components/Home.js\";\nimport React from \"react\";\nimport Hero from \"./Hero\";\nimport DreamTeam from \"./DreamTeam\";\nimport style from \"../css_modules/main.module.css\";\nimport { base_url } from \"../utils/Constants\";\n\nclass Home extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      opening_crawl: ''\n    };\n  }\n\n  componentDidMount() {\n    let text = sessionStorage.getItem('opening_crawl');\n\n    if (text) {\n      this.setState({\n        opening_crawl: text\n      });\n    } else {\n      let episode = Math.floor(Math.random() * 6) + 1;\n      fetch(`${base_url}/v1/films/${episode}`).then(response => response.json()).then(data => {\n        this.setState({\n          opening_crawl: data.opening_crawl\n        });\n        sessionStorage.setItem('opening_crawl', data.opening_crawl);\n      });\n    }\n\n    this.props.changeHero((+this.props.match.params.id || 0) % 10);\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    if (this.props.match.params.id !== prevProps.match.params.id) {\n      this.props.changeHero((+this.props.match.params.id || 0) % 10);\n    }\n  }\n\n  componentWillUnmount() {\n    console.log('Home will unmount');\n  }\n\n  render() {\n    const heroId = (+this.props.match.params.id || 0) % 10;\n    return React.createElement(\"main\", {\n      className: \"clearfix mt-1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46\n      },\n      __self: this\n    }, React.createElement(Hero, {\n      hero: heroId,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47\n      },\n      __self: this\n    }), React.createElement(DreamTeam, {\n      hero: heroId,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      className: style.farGalaxy,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49\n      },\n      __self: this\n    }, this.state.opening_crawl));\n  }\n\n}\n\nexport default Home;","map":{"version":3,"sources":["/Users/gregorypetrov/Documents/WebStorm/31-starwars-react-router/src/components/Home.js"],"names":["React","Hero","DreamTeam","style","base_url","Home","Component","constructor","props","state","opening_crawl","componentDidMount","text","sessionStorage","getItem","setState","episode","Math","floor","random","fetch","then","response","json","data","setItem","changeHero","match","params","id","componentDidUpdate","prevProps","prevState","snapshot","componentWillUnmount","console","log","render","heroId","farGalaxy"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,IAAP,MAAiB,QAAjB;AACA,OAAOC,SAAP,MAAsB,aAAtB;AACA,OAAOC,KAAP,MAAkB,gCAAlB;AACA,SAAQC,QAAR,QAAuB,oBAAvB;;AAEA,MAAMC,IAAN,SAAmBL,KAAK,CAACM,SAAzB,CAAmC;AAC/BC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACTC,MAAAA,aAAa,EAAE;AADN,KAAb;AAGH;;AAEDC,EAAAA,iBAAiB,GAAG;AAChB,QAAIC,IAAI,GAAGC,cAAc,CAACC,OAAf,CAAuB,eAAvB,CAAX;;AACA,QAAIF,IAAJ,EAAU;AACN,WAAKG,QAAL,CAAc;AAACL,QAAAA,aAAa,EAAEE;AAAhB,OAAd;AACH,KAFD,MAEO;AACH,UAAII,OAAO,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgB,CAA3B,IAAgC,CAA9C;AACAC,MAAAA,KAAK,CAAE,GAAEhB,QAAS,aAAYY,OAAQ,EAAjC,CAAL,CACKK,IADL,CACUC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EADtB,EAEKF,IAFL,CAEUG,IAAI,IAAI;AACV,aAAKT,QAAL,CAAc;AACVL,UAAAA,aAAa,EAAEc,IAAI,CAACd;AADV,SAAd;AAGAG,QAAAA,cAAc,CAACY,OAAf,CAAuB,eAAvB,EAAwCD,IAAI,CAACd,aAA7C;AACH,OAPL;AAQH;;AACD,SAAKF,KAAL,CAAWkB,UAAX,CAAsB,CAAC,CAAC,KAAKlB,KAAL,CAAWmB,KAAX,CAAiBC,MAAjB,CAAwBC,EAAzB,IAA+B,CAAhC,IAAqC,EAA3D;AACH;;AAEDC,EAAAA,kBAAkB,CAACC,SAAD,EAAYC,SAAZ,EAAuBC,QAAvB,EAAiC;AAC/C,QAAI,KAAKzB,KAAL,CAAWmB,KAAX,CAAiBC,MAAjB,CAAwBC,EAAxB,KAA+BE,SAAS,CAACJ,KAAV,CAAgBC,MAAhB,CAAuBC,EAA1D,EAA+D;AAC3D,WAAKrB,KAAL,CAAWkB,UAAX,CAAsB,CAAC,CAAC,KAAKlB,KAAL,CAAWmB,KAAX,CAAiBC,MAAjB,CAAwBC,EAAzB,IAA+B,CAAhC,IAAqC,EAA3D;AACH;AACJ;;AAEDK,EAAAA,oBAAoB,GAAG;AACnBC,IAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AACH;;AAEDC,EAAAA,MAAM,GAAG;AACL,UAAMC,MAAM,GAAG,CAAC,CAAC,KAAK9B,KAAL,CAAWmB,KAAX,CAAiBC,MAAjB,CAAwBC,EAAzB,IAA+B,CAAhC,IAAqC,EAApD;AACA,WACI;AAAM,MAAA,SAAS,EAAC,eAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,IAAD;AAAM,MAAA,IAAI,EAAES,MAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,EAEI,oBAAC,SAAD;AAAW,MAAA,IAAI,EAAEA,MAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,EAGI;AAAG,MAAA,SAAS,EAAEnC,KAAK,CAACoC,SAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAgC,KAAK9B,KAAL,CAAWC,aAA3C,CAHJ,CADJ;AAOH;;AA7C8B;;AAgDnC,eAAeL,IAAf","sourcesContent":["import React from \"react\";\nimport Hero from \"./Hero\";\nimport DreamTeam from \"./DreamTeam\";\nimport style from \"../css_modules/main.module.css\";\nimport {base_url} from \"../utils/Constants\";\n\nclass Home extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            opening_crawl: ''\n        };\n    }\n\n    componentDidMount() {\n        let text = sessionStorage.getItem('opening_crawl');\n        if (text) {\n            this.setState({opening_crawl: text});\n        } else {\n            let episode = Math.floor(Math.random() * 6) + 1;\n            fetch(`${base_url}/v1/films/${episode}`)\n                .then(response => response.json())\n                .then(data => {\n                    this.setState({\n                        opening_crawl: data.opening_crawl\n                    });\n                    sessionStorage.setItem('opening_crawl', data.opening_crawl);\n                })\n        }\n        this.props.changeHero((+this.props.match.params.id || 0) % 10);\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        if (this.props.match.params.id !== prevProps.match.params.id)  {\n            this.props.changeHero((+this.props.match.params.id || 0) % 10);\n        }\n    }\n\n    componentWillUnmount() {\n        console.log('Home will unmount');\n    }\n\n    render() {\n        const heroId = (+this.props.match.params.id || 0) % 10;\n        return (\n            <main className=\"clearfix mt-1\">\n                <Hero hero={heroId}/>\n                <DreamTeam hero={heroId}/>\n                <p className={style.farGalaxy}>{this.state.opening_crawl}</p>\n            </main>\n        );\n    }\n}\n\nexport default Home;"]},"metadata":{},"sourceType":"module"}